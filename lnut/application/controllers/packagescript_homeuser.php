<?php

class packageScriptHomeUser extends Controller {



	public function __construct() {
		parent::__construct();
		$this->create();
	}

	protected function section() {

		$arrLanguage = language::getAllAvailableLanguages();
		$arrU = array();
		$arrYears = years::getFilteredYears();

		foreach($arrYears as $arrYear) {
			$arrUnits = units::getFilteredUnits($arrYear['uid']);
			foreach($arrUnits as $arrUnit) {
				$arrU[]=array(
					'uid'	=>$arrUnit['uid'],
					's'		=>array()
				);
				$index=count($arrU)-1;
				$arrSections = sections::getFilteredSections($arrUnit['uid']);
				foreach($arrSections as $arrSection) {
					$arrU[$index]['s'][]=$arrSection['uid'];
				}
			}

			echo json_encode(
				array(
					'sections'	=>array(
						array(
							'l'	=>array(
								'uid'	=>'language_uid',
								'u'		=>$arrU
							)
						)
					)
				)
			); echo '<BR><BR>';
			$arrU=array();
		}
	}


	protected function page() {


		$arrLanguage = language::getAllAvailableLanguages();
		$arrU = array();
		$arrYears = years::getFilteredYears();
		$arrGames = game::getFilteredGames();

		$arrG = array();
		foreach($arrGames as $arrGame) {
			$arrG[] = $arrGame['uid'];
		}

		foreach($arrYears as $arrYear) {
			$arrUnits = units::getFilteredUnits($arrYear['uid']);
			
			//$u_index = count($arrU[$index]['u'])-1;
			foreach($arrUnits as $arrUnit) {
				$arrU[]=array(
					'uid'	=>$arrUnit['uid'],
					's'		=>array()
				);
				$index=count($arrU)-1;
				
				$arrSections = sections::getFilteredSections($arrUnit['uid']);
				foreach($arrSections as $arrSection) {
					//$section_index = count($arrU[$index]['s']);

					$arrU[$index]['s'][]= array(
						'uid'	=>$arrSection['uid'],
						'g'		=>$arrG
					);

				}
			}
			
			echo json_encode(
				array(
					'games'	=>array(
						array(
							'l'	=>array(
								'uid'	=>'language_uid',
								'u'		=>$arrU
							)
						)
					)
				)
			); echo '<BR><BR><BR><BR>';
			//exit;
			$arrU=array();
		}
	}


	public function create() {
		
		set_time_limit(0);

		/*
		echo $json = '{"language_uids":["14"]}';
		$arrl = array(
			'language_uids'=>array("14")
		);
		echo '<br>';
		echo json_encode($arrl);
		echo '<pre>';
		print_r(json_decode($json));
		exit;
		*/

		$json_s1 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"1","s":["1","2","3","4","5","6"]},{"uid":"2","s":["7","8","9","10","11","12"]},{"uid":"3","s":["13","14","15","16","17","18"]},{"uid":"4","s":["19","20","21","22","23","24"]},{"uid":"5","s":["25","26","27","28","29","30"]},{"uid":"6","s":["31","32","33","34","35","36"]}]}}]}';

		$json_g1 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"1","s":[{"uid":"1","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"2","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"3","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"4","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"5","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"6","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"2","s":[{"uid":"7","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"8","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"9","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"10","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"11","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"12","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"3","s":[{"uid":"13","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"14","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"15","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"16","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"17","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"18","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"4","s":[{"uid":"19","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"20","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"21","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"22","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"23","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"24","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"5","s":[{"uid":"25","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"26","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"27","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"28","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"29","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"30","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"6","s":[{"uid":"31","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"32","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"33","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"34","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"35","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"36","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s2 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"7","s":["37","38","39","40","41","42"]},{"uid":"8","s":["43","44","45","46","47","48"]},{"uid":"9","s":["49","50","51","52","53","54"]},{"uid":"10","s":["55","56","57","58","59","60"]},{"uid":"11","s":["61","62","63","64","65","66"]},{"uid":"12","s":["67","68","69","70","71","72"]}]}}]}';

		$json_g2 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"7","s":[{"uid":"37","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"38","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"39","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"40","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"41","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"42","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"8","s":[{"uid":"43","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"44","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"45","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"46","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"47","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"48","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"9","s":[{"uid":"49","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"50","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"51","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"52","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"53","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"54","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"10","s":[{"uid":"55","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"56","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"57","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"58","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"59","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"60","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"11","s":[{"uid":"61","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"62","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"63","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"64","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"65","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"66","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"12","s":[{"uid":"67","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"68","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"69","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"70","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"71","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"72","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s3 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"13","s":["73","74","75","76","77","78"]},{"uid":"14","s":["79","80","81","82","83","84"]},{"uid":"15","s":["85","86","87","88","89","90"]},{"uid":"16","s":["91","92","93","94","95","96"]},{"uid":"17","s":["97","98","99","100","101","102"]},{"uid":"18","s":["103","104","105","106","107","108"]}]}}]}';

		$json_g3 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"13","s":[{"uid":"73","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"74","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"75","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"76","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"77","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"78","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"14","s":[{"uid":"79","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"80","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"81","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"82","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"83","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"84","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"15","s":[{"uid":"85","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"86","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"87","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"88","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"89","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"90","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"16","s":[{"uid":"91","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"92","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"93","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"94","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"95","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"96","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"17","s":[{"uid":"97","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"98","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"99","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"100","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"101","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"102","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"18","s":[{"uid":"103","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"104","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"105","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"106","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"107","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"108","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s4 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"19","s":["109","110","111","112","113","114"]},{"uid":"20","s":["115","116","117","118","119","120"]},{"uid":"21","s":["121","122","123","124","125","126"]},{"uid":"22","s":["127","128","129","130","131","132"]},{"uid":"23","s":["133","134","135","136","137","138"]},{"uid":"24","s":["139","140","141","142","143","144"]}]}}]}';

		$json_g4 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"19","s":[{"uid":"109","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"110","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"111","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"112","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"113","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"114","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"20","s":[{"uid":"115","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"116","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"117","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"118","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"119","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"120","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"21","s":[{"uid":"121","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"122","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"123","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"124","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"125","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"126","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"22","s":[{"uid":"127","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"128","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"129","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"130","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"131","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"132","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"23","s":[{"uid":"133","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"134","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"135","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"136","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"137","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"138","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"24","s":[{"uid":"139","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"140","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"141","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"142","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"143","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"144","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';

		/*
		$arrLanguage = language::getAllAvailableLanguages();
		echo count($arrLanguage);
		echo '<pre>';
		print_r($arrLanguage);
		echo '</pre>';
		*/
		$query ="SELECT `name`, `uid`, `prefix` FROM `language` WHERE `prefix`='mx'";
		$arrLanguage = database::arrQuery($query);
		echo '<pre>';
		print_r($arrLanguage);
		echo '</pre>';
		die('page dies here');
		exit;
		$obj = new reseller_sub_package();
		$query ="SELECT ";
		$query.="`iuser_uid`, ";
		$query.="`locale_rights` ";
		$query.="FROM ";
		$query.="`profile_reseller` ";
		$query.="WHERE ";
		$query.="`locale_rights`!=''";
		$query.="GROUP BY ";
		$query.="`locale_rights` ";
		$resultReseller = database::query($query);
		if(mysql_error()=='' && mysql_num_rows($resultReseller)) {
			while($arrReseller = mysql_fetch_array($resultReseller)) {

				foreach($arrLanguage as $arrLang) {

					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 1');
					$obj->set_sections(str_replace('language_uid',14,$json_s1));
					$obj->set_games(str_replace('language_uid',14,$json_g1));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();



					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 2');
					$obj->set_sections(str_replace('language_uid',14,$json_s2));
					$obj->set_games(str_replace('language_uid',14,$json_g2));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();




					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 3');
					$obj->set_sections(str_replace('language_uid',14,$json_s3));
					$obj->set_games(str_replace('language_uid',14,$json_g3));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();


					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 4');
					$obj->set_sections(str_replace('language_uid',14,$json_s4));
					$obj->set_games(str_replace('language_uid',14,$json_g4));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();


					// set 2

					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('School '.$arrLang['name'].' 1');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s1));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g1));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["'.$arrLang['uid'].'"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();



					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('School '.$arrLang['name'].' 2');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s2));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g2));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["'.$arrLang['uid'].'"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();




					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('School '.$arrLang['name'].' 3');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s3));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g3));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["'.$arrLang['uid'].'"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();


					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('School '.$arrLang['name'].' 4');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s4));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g4));
					$obj->set_package_type('school');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["'.$arrLang['uid'].'"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();

				}
			}
		}
	}

	public function create_homeuser() {
		
		set_time_limit(0);

		/*
		echo $json = '{"language_uids":["14"]}';
		$arrl = array(
			'language_uids'=>array("14")
		);
		echo '<br>';
		echo json_encode($arrl);
		echo '<pre>';
		print_r(json_decode($json));
		exit;
		*/

		$json_s1 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"1","s":["1","2","3","4","5","6"]},{"uid":"2","s":["7","8","9","10","11","12"]},{"uid":"3","s":["13","14","15","16","17","18"]},{"uid":"4","s":["19","20","21","22","23","24"]},{"uid":"5","s":["25","26","27","28","29","30"]},{"uid":"6","s":["31","32","33","34","35","36"]}]}}]}';

		$json_g1 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"1","s":[{"uid":"1","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"2","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"3","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"4","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"5","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"6","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"2","s":[{"uid":"7","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"8","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"9","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"10","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"11","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"12","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"3","s":[{"uid":"13","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"14","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"15","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"16","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"17","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"18","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"4","s":[{"uid":"19","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"20","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"21","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"22","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"23","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"24","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"5","s":[{"uid":"25","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"26","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"27","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"28","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"29","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"30","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"6","s":[{"uid":"31","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"32","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"33","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"34","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"35","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"36","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s2 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"7","s":["37","38","39","40","41","42"]},{"uid":"8","s":["43","44","45","46","47","48"]},{"uid":"9","s":["49","50","51","52","53","54"]},{"uid":"10","s":["55","56","57","58","59","60"]},{"uid":"11","s":["61","62","63","64","65","66"]},{"uid":"12","s":["67","68","69","70","71","72"]}]}}]}';

		$json_g2 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"7","s":[{"uid":"37","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"38","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"39","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"40","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"41","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"42","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"8","s":[{"uid":"43","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"44","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"45","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"46","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"47","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"48","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"9","s":[{"uid":"49","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"50","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"51","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"52","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"53","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"54","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"10","s":[{"uid":"55","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"56","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"57","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"58","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"59","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"60","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"11","s":[{"uid":"61","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"62","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"63","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"64","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"65","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"66","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"12","s":[{"uid":"67","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"68","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"69","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"70","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"71","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"72","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s3 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"13","s":["73","74","75","76","77","78"]},{"uid":"14","s":["79","80","81","82","83","84"]},{"uid":"15","s":["85","86","87","88","89","90"]},{"uid":"16","s":["91","92","93","94","95","96"]},{"uid":"17","s":["97","98","99","100","101","102"]},{"uid":"18","s":["103","104","105","106","107","108"]}]}}]}';

		$json_g3 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"13","s":[{"uid":"73","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"74","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"75","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"76","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"77","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"78","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"14","s":[{"uid":"79","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"80","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"81","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"82","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"83","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"84","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"15","s":[{"uid":"85","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"86","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"87","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"88","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"89","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"90","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"16","s":[{"uid":"91","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"92","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"93","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"94","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"95","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"96","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"17","s":[{"uid":"97","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"98","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"99","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"100","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"101","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"102","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"18","s":[{"uid":"103","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"104","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"105","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"106","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"107","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"108","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';


		$json_s4 = '{"sections":[{"l":{"uid":"language_uid","u":[{"uid":"19","s":["109","110","111","112","113","114"]},{"uid":"20","s":["115","116","117","118","119","120"]},{"uid":"21","s":["121","122","123","124","125","126"]},{"uid":"22","s":["127","128","129","130","131","132"]},{"uid":"23","s":["133","134","135","136","137","138"]},{"uid":"24","s":["139","140","141","142","143","144"]}]}}]}';

		$json_g4 = '{"games":[{"l":{"uid":"language_uid","u":[{"uid":"19","s":[{"uid":"109","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"110","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"111","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"112","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"113","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"114","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"20","s":[{"uid":"115","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"116","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"117","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"118","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"119","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"120","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"21","s":[{"uid":"121","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"122","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"123","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"124","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"125","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"126","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"22","s":[{"uid":"127","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"128","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"129","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"130","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"131","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"132","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"23","s":[{"uid":"133","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"134","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"135","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"136","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"137","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"138","g":["1","2","3","4","5","6","7","8","9"]}]},{"uid":"24","s":[{"uid":"139","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"140","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"141","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"142","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"143","g":["1","2","3","4","5","6","7","8","9"]},{"uid":"144","g":["1","2","3","4","5","6","7","8","9"]}]}]}}]}';

		$arrLanguage = language::getAllAvailableLanguages();
		echo count($arrLanguage);
		echo '<pre>';
		print_r($arrLanguage);
		echo '</pre>';
		//exit;
		$obj = new reseller_sub_package();
		$query ="SELECT ";
		$query.="`iuser_uid`, ";
		$query.="`locale_rights` ";
		$query.="FROM ";
		$query.="`profile_reseller` ";
		$query.="WHERE ";
		$query.="`locale_rights`!=''";
		$query.="GROUP BY ";
		$query.="`locale_rights` ";
		$resultReseller = database::query($query);
		if(mysql_error()=='' && mysql_num_rows($resultReseller)) {
			while($arrReseller = mysql_fetch_array($resultReseller)) {

				foreach($arrLanguage as $arrLang) {

					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 1');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s1));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g1));
					$obj->set_package_type('homeuser');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();



					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 2');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s2));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g2));
					$obj->set_package_type('homeuser');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();




					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 3');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s3));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g3));
					$obj->set_package_type('homeuser');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();


					$obj->set_reseller_uid($arrReseller['iuser_uid']);
					$obj->set_name('English ('.$arrLang['prefix'] . ') 4');
					$obj->set_sections(str_replace('language_uid',$arrLang['uid'],$json_s4));
					$obj->set_games(str_replace('language_uid',$arrLang['uid'],$json_g4));
					$obj->set_package_type('homeuser');

					$obj->set_support_language_uid($this->getLanguageUid($arrReseller['locale_rights']));
					$obj->set_created_date(date('Y-m-d H:i:s'));
					$obj->set_learnable_language('{"language_uids":["14"]}');
					$obj->set_is_active(1);
					$obj->set_price(299.95);
					$obj->insert();
				}
			}
		}
	}

	private function getLanguageUid($locale='en') {
		$query ="SELECT ";
		$query.="`uid` ";
		$query.="FROM ";
		$query.="`language` ";
		$query.="WHERE ";
		$query.="`prefix`='".$locale."' ";
		$result = database::query($query);
		if(mysql_error()=='' && mysql_num_rows($result)) {
			$row = mysql_fetch_array($result);
			return $row['uid'];
		}
		return 14;
	}

}

?>

